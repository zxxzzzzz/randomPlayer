(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{0:function(e,n,t){e.exports=t("2f39")},"2f39":function(e,n,t){"use strict";t.r(n);var r=t("967e"),a=t.n(r),u=(t("a481"),t("96cf"),t("fa84")),s=t.n(u),o=(t("7d6e"),t("e54f"),t("985d"),t("31cd"),t("2b0e")),c=t("b05d");o["a"].use(c["a"],{config:{}});var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"q-app"}},[t("router-view")],1)},f=[],p={name:"App"},l=p,d=t("2877"),h=Object(d["a"])(l,i,f,!1,null,null,null),m=h.exports,w=t("2f62"),v=(t("551c"),t("ac6a"),t("cadf"),t("06db"),t("5df3"),t("7f7f"),t("bc3a")),b=t.n(v),x=b.a.create({baseURL:"/api",timeout:1e4,withCredentials:!0});x.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var k=x;function S(){var e=1e4*Math.random()%1e4;return k.get("/personal_fm",{params:{hash:e}})}function g(e){return new Promise((function(n){k.get("/like",{params:{id:e}}).then((function(e){n(e)}))}))}function T(e){return new Promise((function(n){k.get("/song/url",{params:{id:e}}).then((function(e){n(e.data[0].url)}))}))}function _(e){return new Promise((function(n){k.get("/likelist",{params:{uid:e}}).then((function(e){n(e.ids)}))}))}var E={FMOriginTracks:[],FMTracks:[],favoriteSongIds:[]},F={SET_FM_ORIGIN_TRACKS:function(e,n){e.FMOriginTracks=n},SET_FM_TRACKS:function(e,n){e.FMTracks=n},SET_LIKE:function(e,n){e.FMTracks.forEach((function(t){t.id===n&&(t.favorited=!0,e.favoriteSongIds.push(n))}))},SET_FAVORITE_SONGS:function(e,n){e.favoriteSongIds=n}},M={setFM:function(e){var n=e.dispatch,t=e.state,r=e.commit;return s()(a.a.mark((function e(){var u,o,c;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n("setFavoriteSongs");case 2:return e.next=4,S();case 4:return u=e.sent,r("SET_FM_ORIGIN_TRACKS",u.data),o=t.FMOriginTracks.map(function(){var e=s()(a.a.mark((function e(n){var r,u,s,o,c,i,f;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.name,u=n.artists[0].name,s=n.album.picUrl,o=n.id,e.next=6,T(o);case 6:return c=e.sent,i="",f=o in t.favoriteSongIds,e.abrupt("return",{name:r,artist:u,cover:s,source:c,url:i,id:o,favorited:f});case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.next=9,Promise.all(o);case 9:c=e.sent,r("SET_FM_TRACKS",c);case 11:case"end":return e.stop()}}),e)})))()},like:function(e,n){var t=e.commit;return s()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g(n);case 2:t("SET_LIKE",n);case 3:case"end":return e.stop()}}),e)})))()},setFavoriteSongs:function(e){var n=e.commit,t=e.rootGetters;return s()(a.a.mark((function e(){var r,u;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.uid,e.next=3,_(r);case 3:u=e.sent,n("SET_FAVORITE_SONGS",u);case 5:case"end":return e.stop()}}),e)})))()}},I={tracks:function(e){return e.FMTracks}},R={namespaced:!0,mutations:F,actions:M,getters:I,state:E};function O(e,n){return k.get("/login/cellphone",{params:{phone:e,password:n}})}var y={info:{}},A={SET_USER:function(e,n){e.info=n}},P={login:function(e,n){var t=e.commit,r=n.phone,u=n.password;return s()(a.a.mark((function e(){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,O(r,u);case 2:n=e.sent,t("SET_USER",n);case 4:case"end":return e.stop()}}),e)})))()}},U={namespaced:!0,mutations:A,actions:P,state:y},C={uid:function(e){return e.User.info?e.User.info.account.id:null}};o["a"].use(w["a"]);var K=new w["a"].Store({modules:{FM:R,User:U},getters:C,strict:!1}),G=K,V=t("8c4f"),L=[{path:"/",component:function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,"f241"))},children:[{path:"",component:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,"8b24"))}}]}];L.push({path:"*",component:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,"e51e"))}});var N=L;o["a"].use(V["a"]);var j=function(){var e=new V["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:N,mode:"hash",base:""});return e},q=function(){return J.apply(this,arguments)};function J(){return J=s()(a.a.mark((function e(){var n,t,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof G){e.next=6;break}return e.next=3,G({Vue:o["a"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=G;case 7:if(n=e.t0,"function"!==typeof j){e.next=14;break}return e.next=11,j({Vue:o["a"],store:n});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=j;case 15:return t=e.t1,n.$router=t,r={el:"#q-app",router:t,store:n,render:function(e){return e(m)}},e.abrupt("return",{app:r,store:n,router:t});case 19:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}var $=t("a925"),B={failed:"Action failed",success:"Action was successful"},Q={"en-us":B};o["a"].use($["a"]);var z=new $["a"]({locale:"en-us",fallbackLocale:"en-us",messages:Q}),D=function(e){var n=e.app;n.i18n=z};function H(){return W.apply(this,arguments)}function W(){return W=s()(a.a.mark((function e(){var n,t,r,u,s,c,i,f,p;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:n=e.sent,t=n.app,r=n.store,u=n.router,s=!0,c=function(e){s=!1,window.location.href=e},i=window.location.href.replace(window.location.origin,""),f=[D,k],p=0;case 11:if(!(!0===s&&p<f.length)){e.next=29;break}if("function"===typeof f[p]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,f[p]({app:t,router:u,store:r,Vue:o["a"],ssrContext:null,redirect:c,urlPath:i});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:p++,e.next=11;break;case 29:if(!1!==s){e.next=31;break}return e.abrupt("return");case 31:new o["a"](t);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),W.apply(this,arguments)}H()},"31cd":function(e,n,t){}},[[0,2,0]]]);